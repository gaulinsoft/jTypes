/*! ------------------------------------------------------------------------
//                               jTypes 2.2.X
//  ------------------------------------------------------------------------
//
//                   Copyright 2013 Gaulinsoft Corporation
//
//       Licensed under the Apache License, Version 2.0 (the "License");
//      you may not use this file except in compliance with the License.
//                   You may obtain a copy of the License at
//
//                 http://www.apache.org/licenses/LICENSE-2.0
//
//     Unless required by applicable law or agreed to in writing, software
//      distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//     See the License for the specific language governing permissions and
//                       limitations under the License.
*/
(function(r,f,b,h){h=Object;var z=h.defineProperty,A=function(a){return"jTypes Error: "+b.format.apply(b,arguments)},k=f(r.document),c=null,d={},l=0,B=function(a,e){a=f(a).first();e=f(e).first();var c=b.asInt(a.attr("tabindex")),d=b.asInt(e.attr("tabindex"));isFinite(c)||(c=b.settings.MAX_INT);isFinite(d)||(d=b.settings.MAX_INT);return c!==d?c-d:0===a.add(e).index(a)?-1:1};f(r);k.bind("click",function(a){c&&c.as(d.Element).blur()}).bind("keydown",function(a){var e=b.now();if(!(e-l<b.settings.DOCUMENT_KEYPRESS_INTERVAL))switch(l=
e,a.which){case 9:var e=[],m=b.asArray(f("input, select, textarea").toArray()),n=[];if(!m.length)break;m.sort(B);for(var h=0,k=m.length;h<k;h++){var g=f(m[h]),p=g.data(b.settings.JQUERY_DATA_PREFIX);if(p){var q=p.as(b.forms.Element);q.visible&&!q.disabled&&(g=b.asInt(g.attr("tabindex"))||0,!isFinite(g)||0>g||(e.push(q),n.push(p)))}}if(!n.length)break;a.preventDefault();g=f.inArray(c,n);-1===g||!a.shiftKey&&++g===e.length?g=0:a.shiftKey&&-1===--g&&(g=e.length-1);e[g].focus();return!1;case 13:case 32:if(c){e=
c.as(b.forms.Button);if(!e)break;a.preventDefault();e.trigger("click");return!1}break;case 27:if(c)return a.preventDefault(),c.as(d.Element).blur(),!1}});b.property(d,"Element",{e:!0,v:b("abstract",function(a){if(!(a&&a.jquery&&0!=a.length&&a instanceof f))throw A("An `Element` requires one DOM element in a jQuery wrapper.");this.$_element=a.first().data(b.settings.JQUERY_DATA_PREFIX,this.__self)},{"protected $_element":null,"public virtual bind":function(){this.$_element.bind.apply(this.$_element,
arguments);return this},"public abstract blur":function(){return c===this.__self?(c=null,!0):!1},"public abstract dispose":function(a){this.$_element.removeData(b.settings.JQUERY_DATA_PREFIX)},"public abstract focus":function(){c&&c!==this.__self&&c.as(d.Element).blur();if(this.disabled)return!1;c=this.__self;return!0},"public virtual reset":function(){c===this.__self&&this.blur();return this},"public virtual trigger":function(){this.$_element.triggerHandler.apply(this.$_element,arguments);return this},
"public virtual unbind":function(){this.$_element.unbind.apply(this.$_element,arguments);return this},"public virtual disabled":{get:function(){return b.asBool(this.$_element.prop("disabled"))},set:function(a){(a=b.asBool(a))&&c===this.__self&&this.blur();this.$_element.prop("disabled",a)}},"public abstract visible":{get:b.empty()}})});var s=function(a){a=a.data;c&&c!==this.__self&&c.as(d.Element).blur();a.disabled||a.$_element.triggerHandler("click")},t=function(a){var c=b.now();if(!(c-l<b.settings.DOCUMENT_KEYPRESS_INTERVAL)){var d=
a.data;switch(a.which){case 13:case 32:return l=c,a.preventDefault(),d.$_element.triggerHandler("click"),!1}}},u=function(a){a=a.data;a.disabled()||a.$_element.triggerHandler("mouseenter")},v=function(a){a=a.data;a.disabled()||a.$_element.triggerHandler("mouseleave")};b.property(d,"Button",{e:!0,v:b(d.Element,function(a,c){this.__base(a);this._img=b.asBool(c);this.$_button=f('<span class="button" />');this.$_icon=f(c?"<img />":"<span />");var d=b.asString(this.$_element.attr("class")),h=b.asString(this.$_element.attr("style"));
d&&this.$_button.addClass(d);h&&this.$_button.attr("style",h);this.disabled&&this.$_button.addClass("disabled");this.$_element.hide().after(this.$_button.bind("click",this,s).bind("vmouseover",this,u).bind("vmouseout",this,v));this.text=this.$_element.val()||""},{"protected $_button":null,"protected $_icon":null,"private _img":!1,"public override blur":function(){if(!this.__base.blur())return this;this.$_button.removeClass("focused");k.unbind("keydown",t);this.$_element.triggerHandler("blur");return this},
"public override dispose":function(){this.__base.dispose();this.$_button.remove();this.$_element.unbind("click",s).unbind("vmouseover",u).unbind("vmouseout",v).show()},"public override focus":function(){if(!this.__base.focus())return this;b.scrollTo(this.$_button);this.$_button.addClass("focused");k.keydown(this,t);this.$_element.triggerHandler("focus");return this},"public override reset":function(){this.__base.reset();this.$_button.removeClass("error");this.text=this.$_element.prop("defaultValue")||
""},"public override disabled":{set:function(a){(this.__base.disabled=a)?this.$_button.addClass("disabled"):this.$_button.removeClass("disabled")}},"public virtual icon":{get:function(){return this._img?b.asString(this.$_element.attr("src")):b.asString(this.$_icon.html())},set:function(a){(a=b.asString(a))?(this._img?(this.$_element.attr("src",a),this.$_icon.attr("src",a)):this.$_icon.html(a),this.$_button.prepend(this.$_icon)):(this._img&&this.$_element.removeAttr("src"),this.$_icon.detach())}},
"public virtual text":{get:function(){return b.asString(this.$_element.val())},set:function(a){a=b.asString(a);this.$_element.val(a);this.$_button.text(a);this.icon&&this.$_button.prepend(this.$_icon)}},"public override visible":{get:function(){return!this.$_button.is(":hidden")}}})});var w=function(a){a=a.data;c===a.__self&&(c=null);a.$_textbox.removeClass("focused multiline");a.$_element.hasClass("floating")&&a.$_element.removeClass("focused");if(!b.compatibility.placeholder&&!a.$_element.val()){var e=
b.asString(a.$_element.attr("placeholder"));e&&a.$_element.addClass("placeholder").val(e)}},C=function(a){a=a.data;c&&c!==a.__self&&c.as(d.Element).blur();if(!a.disabled)return c!==a.__self&&a.$_element.focus(),!1},x=function(a){a=a.data;c&&c!==a.__self&&c.as(d.Element).blur();c=a.__self;a.$_textbox.addClass("focused");a.$_element.hasClass("floating")&&a.$_element.addClass("focused");b.compatibility.placeholder||a.$_element.hasClass("placeholder")&&a.$_element.removeClass("placeholder").val("")},
y=function(a){if(13==a.which)return a.preventDefault(),a.data.$_textbox.closest("form").find('input[type="submit"], input[data-submit]').first().click(),!1},D=function(a){if(c===a.data.__self)return!1};b.property(d,"Textbox",{e:!0,v:b(d.Element,function(a){this.__base(a);this.$_textbox=f('<span class="input" />');this.$_wrapper=f('<span class="fwrapper textbox" />');a=b.asString(this.$_element.attr("class"));var c=b.asString(this.$_element.attr("style"));a&&this.$_wrapper.data(b.settings.JQUERY_DATA_PREFIX+
"class",a).addClass(a);c&&this.$_wrapper.data(b.settings.JQUERY_DATA_PREFIX+"style",c).attr("style",c);this.$_wrapper.append(this.$_textbox.bind("click",this,C).bind("vmousedown",this,D).append(this.$_element.after(this.$_wrapper).detach().removeAttr("class").removeAttr("style").bind("blur",this,w).bind("focus",this,x).bind("keydown",this,y)));b.compatibility.placeholder||this.$_element.val()||(a=b.asString(this.$_element.attr("placeholder")))&&this.$_element.addClass("placeholder").val(a)},{"protected $_textbox":null,
"protected $_wrapper":null,"public override blur":function(){if(!this.__base.blur())return this;this.$_element.blur();return this},"public override dispose":function(){this.__base.dispose();var a=this.$_wrapper.data(b.settings.JQUERY_DATA_PREFIX+"class"),c=this.$_wrapper.data(b.settings.JQUERY_DATA_PREFIX+"style");a?this.$_element.attr("class",a):this.$_element.removeAttr("class");c?this.$_element.attr("style",c):this.$_element.removeAttr("style");this.$_wrapper.before(this.$_element.detach().unbind("blur",
w).unbind("focus",x).unbind("keydown",y)).remove()},"public override focus":function(){if(!this.__base.focus())return this;b.scrollTo(this.$_wrapper);this.$_element.focus();return this},"public override reset":function(){this.__base.reset();this.$_textbox.removeClass("error");this.value=this.$_element.prop("defaultValue");return this},"public override disabled":{set:function(a){(this.__base.disabled=a)?this.$_textbox.addClass("disabled"):this.$_textbox.removeClass("disabled")}},"public placeholder":{get:function(){return b.asString(this.$_element.attr("placeholder"))},
set:function(a){(a=b.asString(a))?this.$_element.attr("placeholder",a):this.$_element.removeAttr("placeholder");!b.compatibility.placeholder&&this.$_textbox.hasClass("placeholder")&&this.$_element.val(a)}},"public virtual value":{get:function(){return!b.compatibility.placeholder&&this.$_textbox.hasClass("placeholder")?"":b.asString(this.$_element.val())},set:function(a){a=b.asString(a);this.$_element.val(a);b.compatibility.placeholder||(a?this.$_textbox.removeClass("placeholder"):(this.$_element.val(b.asString(this.$_element.attr("placeholder"))),
this.$_textbox.addClass("placeholder")))}},"public override visible":{get:function(){return!this.$_textbox.is(":hidden")}}})});z.call(h,b,"forms",{configurable:!1,enumerable:!0,value:d,writable:!1})})(window,window.jQuery,jTypes);